# å¡”ç½—ç‰Œç¿»è¯‘ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„AIé©±åŠ¨çš„å¡”ç½—ç‰Œç¿»è¯‘ç³»ç»Ÿï¼Œä¸“é—¨ç”¨äºå°†ä¸­æ–‡å¡”ç½—ç‰Œå†…å®¹ç¿»è¯‘ä¸ºä¸“ä¸šçš„è‹±æ–‡ã€‚ç³»ç»Ÿæ”¯æŒå¡ç‰Œã€ç»´åº¦ã€ç‰Œé˜µå’Œè§£è¯»çš„å®Œæ•´ç¿»è¯‘æµç¨‹ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- OpenAI APIå¯†é’¥
- SQLiteæ•°æ®åº“æ–‡ä»¶ `tarot_config.db`

### å®‰è£…ä¾èµ–

```bash
pip install openai python-dotenv asyncio rich sqlite3
```

### é…ç½®æ£€æŸ¥

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥é…ç½®æ–‡ä»¶ `translation_config.py` ä¸­çš„APIé…ç½®ï¼š

```python
"openai": {
    "api_key": "your-openai-api-key",
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-5-mini-2025-08-07"
}
```

## ğŸ“– å®Œæ•´ä½¿ç”¨æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®å¯¼å‡º

å°†æ•°æ®åº“ä¸­çš„ä¸­æ–‡åŸå§‹æ•°æ®å¯¼å‡ºä¸ºJSONæ–‡ä»¶ï¼š

```bash
python export_database_raw.py
```

**è¾“å‡ºæ–‡ä»¶ä½ç½®**ï¼š
- `output/database_raw/card_raw.json` - 78å¼ å¡ç‰Œæ•°æ®
- `output/database_raw/dimension_raw.json` - 12ä¸ªç»´åº¦æ•°æ®
- `output/database_raw/spread_raw.json` - 1ä¸ªç‰Œé˜µæ•°æ®
- `output/database_raw/card_interpretation_raw.json` - 156æ¡è§£è¯»æ•°æ®

### ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œç¿»è¯‘

ä½¿ç”¨AIå¼•æ“ç¿»è¯‘å¯¼å‡ºçš„æ•°æ®ï¼š

```bash
# ç¿»è¯‘æ‰€æœ‰è¡¨
python translate_database.py --all

# æˆ–è€…ç¿»è¯‘ç‰¹å®šè¡¨
python translate_database.py --table card
python translate_database.py --table dimension
```

**ç¿»è¯‘è¿‡ç¨‹åŒ…å«**ï¼š
- æˆæœ¬é¢„ä¼°å’Œç”¨æˆ·ç¡®è®¤
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- é”™è¯¯é‡è¯•æœºåˆ¶
- è¯¦ç»†ç»Ÿè®¡æŠ¥å‘Š

### ç¬¬ä¸‰æ­¥ï¼šå¯¼å…¥æ•°æ®åº“

å°†ç¿»è¯‘ç»“æœå¯¼å…¥åˆ°æ•°æ®åº“ç¿»è¯‘è¡¨ä¸­ï¼š

```bash
# å¯¼å…¥æ‰€æœ‰ç¿»è¯‘
python import_database_translated.py --all

# æˆ–è€…å¯¼å…¥ç‰¹å®šè¡¨
python import_database_translated.py --table card
```

**å¯¼å…¥ç‰¹æ€§**ï¼š
- è‡ªåŠ¨æ¸…ç†ç°æœ‰è‹±æ–‡ç¿»è¯‘
- äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§
- å¯¼å…¥éªŒè¯å’Œç»Ÿè®¡

### ç¬¬å››æ­¥ï¼šè´¨é‡éªŒè¯

éªŒè¯ç¿»è¯‘è´¨é‡å’Œæ•°æ®åº“é›†æˆï¼š

```bash
# éªŒè¯æ‰€æœ‰ç¿»è¯‘
python validate_translation_quality.py --all --report

# éªŒè¯ç‰¹å®šè¡¨
python validate_translation_quality.py --table card
```

**éªŒè¯å†…å®¹**ï¼š
- ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥
- æœ¯è¯­ä¸€è‡´æ€§éªŒè¯
- è´¨é‡æ ‡å‡†æ£€æŸ¥
- æ•°æ®åº“é›†æˆéªŒè¯

## ğŸ”§ é«˜çº§ç”¨æ³•

### å•è¡¨æ“ä½œ

```bash
# åªç¿»è¯‘å¡ç‰Œè¡¨
python translate_database.py --table card

# åªå¯¼å…¥ç»´åº¦ç¿»è¯‘
python import_database_translated.py --table dimension

# åªéªŒè¯ç‰Œé˜µç¿»è¯‘
python validate_translation_quality.py --table spread
```

### æ‰¹é‡æ“ä½œ

```bash
# ç¿»è¯‘å¤šä¸ªæŒ‡å®šè¡¨
python translate_database.py --tables card dimension

# å¯¼å…¥å¤šä¸ªæŒ‡å®šè¡¨
python import_database_translated.py --tables card dimension
```

### å¼ºåˆ¶è¦†ç›–

```bash
# å¼ºåˆ¶é‡æ–°ç¿»è¯‘ï¼ˆè¦†ç›–ç°æœ‰ç¿»è¯‘ï¼‰
python translate_database.py --all --force

# å¼ºåˆ¶é‡æ–°å¯¼å…¥
python import_database_translated.py --all --force
```

### ç”ŸæˆæŠ¥å‘Š

```bash
# ç”Ÿæˆè¯¦ç»†è´¨é‡æŠ¥å‘Š
python validate_translation_quality.py --all --report
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶ç»“æ„

```
translation/output/
â”œâ”€â”€ database_raw/                    # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ card_raw.json
â”‚   â”œâ”€â”€ dimension_raw.json
â”‚   â”œâ”€â”€ spread_raw.json
â”‚   â””â”€â”€ card_interpretation_raw.json
â”œâ”€â”€ database_translated/             # ç¿»è¯‘ç»“æœ
â”‚   â”œâ”€â”€ card_translated.json
â”‚   â”œâ”€â”€ dimension_translated.json
â”‚   â”œâ”€â”€ spread_translated.json
â”‚   â””â”€â”€ card_interpretation_translated.json
â””â”€â”€ validation_report.json           # è´¨é‡éªŒè¯æŠ¥å‘Š
```

## ğŸ¯ ç¿»è¯‘æ ‡å‡†

### å¡ç‰Œç¿»è¯‘æ ‡å‡†
- **å¤§é˜¿å¡çº³**: The Fool, The Magician, The High Priestess...
- **å°é˜¿å¡çº³**: Ace of Wands, Two of Cups, Three of Swords...
- **ç‰Œç»„**: Wands, Cups, Swords, Pentacles, Major Arcana

### ç»´åº¦ç¿»è¯‘æ ‡å‡†
- **ç±»åˆ«**: Emotional, Career, Spiritual, Decision Making, Health, Relationships
- **æ—¶é—´çº¿**: Past, Present, Future
- **ä¿æŒä¸“ä¸šæ€§**: ä½¿ç”¨æ ‡å‡†å åœæœ¯è¯­

### è§£è¯»ç¿»è¯‘æ ‡å‡†
- **æ–¹å‘**: Upright, Reversed
- **ä¿æŒè¯­æ°”**: ç»´æŒå åœè¯­è¨€çš„ç¥ç§•æ„Ÿå’Œå¯å‘æ€§
- **å‡†ç¡®æ€§**: ä¼ è¾¾åŸæ„çš„æ·±å±‚å«ä¹‰

## ğŸ” è´¨é‡æ§åˆ¶

### è‡ªåŠ¨éªŒè¯é¡¹ç›®

1. **å®Œæ•´æ€§æ£€æŸ¥**
   - æ‰€æœ‰è®°å½•éƒ½æœ‰ç¿»è¯‘
   - å¿…å¡«å­—æ®µä¸ä¸ºç©º
   - IDå¯¹åº”æ­£ç¡®

2. **ä¸€è‡´æ€§æ£€æŸ¥**
   - æœ¯è¯­ä½¿ç”¨ç»Ÿä¸€
   - å‘½åæ ¼å¼æ ‡å‡†
   - åˆ†ç±»æ ‡ç­¾ä¸€è‡´

3. **è´¨é‡æ£€æŸ¥**
   - æ— ä¸­æ–‡å­—ç¬¦æ®‹ç•™
   - é•¿åº¦åˆç†æ€§
   - æ ¼å¼è§„èŒƒæ€§

4. **æ•°æ®åº“é›†æˆ**
   - å¯¼å…¥è®°å½•æ•°åŒ¹é…
   - IDå®Œæ•´æ€§éªŒè¯
   - æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥

### è´¨é‡æŠ¥å‘Šè§£è¯»

```json
{
  "validation_summary": {
    "overall_quality": "Good",  // Good/Needs Improvement/Poor
    "issues_found": 0,          // å‘ç°çš„é—®é¢˜æ•°é‡
    "tables_validated": 4       // éªŒè¯çš„è¡¨æ•°é‡
  },
  "issues": [...],              // é—®é¢˜è¯¦æƒ…åˆ—è¡¨
  "glossary_size": 80,          // æœ¯è¯­è¯å…¸å¤§å°
  "standard_cards_count": 78     // æ ‡å‡†å¡ç‰Œæ•°é‡
}
```

## ğŸ’° æˆæœ¬æ§åˆ¶

### Tokenä½¿ç”¨ä¼°ç®—

- **å•æ¡è®°å½•**: ~500 tokens
- **å®Œæ•´ç¿»è¯‘**: ~123,500 tokens (247æ¡è®°å½•)
- **é¢„ä¼°æˆæœ¬**: $3-8 (å–å†³äºæ¨¡å‹é€‰æ‹©)

### æˆæœ¬ä¼˜åŒ–ç­–ç•¥

1. **åˆ†æ‰¹å¤„ç†**: æŒ‰è¡¨åˆ†æ‰¹ç¿»è¯‘ï¼Œä¾¿äºæ§åˆ¶æˆæœ¬
2. **æ ·æœ¬æµ‹è¯•**: å…ˆç”¨å°‘é‡æ•°æ®æµ‹è¯•è´¨é‡
3. **æœ¯è¯­è¯å…¸**: å‡å°‘é‡å¤ç¿»è¯‘çš„APIè°ƒç”¨
4. **æ¸©åº¦è®¾ç½®**: ä½¿ç”¨ä½æ¸©åº¦(0.1)æé«˜ä¸€è‡´æ€§

### ä½¿ç”¨ç»Ÿè®¡

ç³»ç»Ÿä¼šè‡ªåŠ¨ç»Ÿè®¡ï¼š
- æ€»APIè°ƒç”¨æ¬¡æ•°
- Tokenä½¿ç”¨æ€»é‡
- æˆåŠŸç‡å’Œå¤±è´¥ç‡
- å¤„ç†æ—¶é—´ç»Ÿè®¡

## ğŸ”§ é…ç½®è‡ªå®šä¹‰

### ä¿®æ”¹AIæ¨¡å‹

ç¼–è¾‘ `translation_config.py`ï¼š

```python
"model": "gpt-4",  # æ”¹ä¸ºå…¶ä»–æ¨¡å‹
"temperature": 0.2,  # è°ƒæ•´åˆ›é€ æ€§
"max_tokens": 1500   # è°ƒæ•´æœ€å¤§é•¿åº¦
```

### è°ƒæ•´æ‰¹å¤„ç†å‚æ•°

```python
"batch_config": {
    "batch_size": 5,                    # å‡å°‘å¹¶å‘æ•°
    "rate_limit_per_minute": 30,        # é™ä½é€Ÿç‡
    "max_retries": 5,                   # å¢åŠ é‡è¯•æ¬¡æ•°
    "retry_delay": 3.0                  # å¢åŠ é‡è¯•å»¶è¿Ÿ
}
```

### è‡ªå®šä¹‰æœ¯è¯­è¯å…¸

ç¼–è¾‘ `translation_glossary.json`ï¼š

```json
{
  "æ„šè€…": "The Fool",
  "é­”æœ¯å¸ˆ": "The Magician",
  "è‡ªå®šä¹‰æœ¯è¯­": "Custom Translation"
}
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. APIè¿æ¥å¤±è´¥
```
âŒ OpenAIå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥: Invalid API key
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ `translation_config.py` ä¸­çš„APIå¯†é’¥æ˜¯å¦æ­£ç¡®

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```
âŒ æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨: data/tarot_config.db
```
**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®

#### 3. ç¿»è¯‘è´¨é‡é—®é¢˜
```
âš ï¸ ç¿»è¯‘ä¸å®Œæ•´: 75/78 (ç¼ºå¤± 3 æ¡è®°å½•)
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œé‡æ–°è¿è¡Œç¿»è¯‘

#### 4. å¯¼å…¥å¤±è´¥
```
âŒ å¯¼å…¥è¡¨ card å¤±è´¥: UNIQUE constraint failed
```
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ `--force` å‚æ•°æ¸…ç†ç°æœ‰æ•°æ®

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export TRANSLATION_DEBUG=1

# è¿è¡Œç¿»è¯‘
python translate_database.py --all
```

### æ‰‹åŠ¨æ¢å¤

å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨æ¢å¤ï¼š

```bash
# 1. é‡æ–°å¯¼å‡ºæ•°æ®
python export_database_raw.py

# 2. é‡æ–°ç¿»è¯‘
python translate_database.py --all --force

# 3. é‡æ–°å¯¼å…¥
python import_database_translated.py --all --force
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æé«˜ç¿»è¯‘è´¨é‡

1. **ä¼˜åŒ–æç¤ºè¯**: ç¼–è¾‘ `prompts/` ç›®å½•ä¸‹çš„æ¨¡æ¿æ–‡ä»¶
2. **æ‰©å±•æœ¯è¯­è¯å…¸**: æ·»åŠ æ›´å¤šä¸“ä¸šæœ¯è¯­
3. **è°ƒæ•´å‚æ•°**: é™ä½temperatureæé«˜ä¸€è‡´æ€§
4. **äººå·¥å®¡æ ¸**: å…³é”®å†…å®¹å»ºè®®äººå·¥æ£€æŸ¥

### æé«˜å¤„ç†æ•ˆç‡

1. **åˆç†æ‰¹æ¬¡å¤§å°**: æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´batch_size
2. **å¹¶å‘æ§åˆ¶**: é¿å…è¿‡é«˜çš„å¹¶å‘å¯¼è‡´APIé™åˆ¶
3. **åˆ†æ—¶å¤„ç†**: å¤§é‡æ•°æ®åˆ†æ—¶æ®µå¤„ç†
4. **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤ç¿»è¯‘ç›¸åŒå†…å®¹

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ—¥å¿—æ–‡ä»¶

ç³»ç»Ÿä¼šç”Ÿæˆè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- APIè°ƒç”¨è¯¦æƒ…
- é”™è¯¯ä¿¡æ¯å’Œå †æ ˆ
- æ€§èƒ½ç»Ÿè®¡æ•°æ®
- ç¿»è¯‘è´¨é‡æŠ¥å‘Š

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ `translation/output/` ç›®å½•ä¸‹çš„æŠ¥å‘Šæ–‡ä»¶
3. å‚è€ƒæœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
4. æŸ¥çœ‹ `claude.md` äº†è§£è¯¦ç»†çš„æŠ€æœ¯è®¾è®¡

### ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: v1.0.0
- **æ›´æ–°æ—¥æœŸ**: 2025-01-13
- **Pythonè¦æ±‚**: 3.8+
- **ä¾èµ–åŒ…**: openai, rich, asyncio

---

*æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ [è®¾è®¡æ–‡æ¡£](claude.md)*